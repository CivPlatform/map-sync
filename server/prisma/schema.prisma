generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model ChunkData {
  hash      Bytes  @id
  version   Int
  data      Bytes
  world     String
  chunkX    Int
  chunkZ    Int
  timestamp BigInt

  playerChunk PlayerChunk[]
}

model PlayerChunk {
  world     String
  chunkX    Int
  chunkZ    Int
  uuid      String
  timestamp BigInt

  hash      Bytes?
  chunkData ChunkData? @relation(fields: [hash], references: [hash], onDelete: NoAction, onUpdate: NoAction)

  @@id([world, chunkX, chunkZ, uuid])
}
